"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[883],{9278:function(k,h,t){t.d(h,{Z:function(){return ne}});var e=t(9526),s={ArticleList:"Style_ArticleList__88A49",title:"Style_title__oFF6d",switch:"Style_switch__Scpbh",buttonWrapper:"Style_buttonWrapper__j7P69"},A=t(4975),d=t(592),S=t(7025),u=t(5113),m=t(3546),z=t(409),T=t(3009),V=t(6275),j=t(932),Q=t(5303);const{Item:G}=A.ZP,{Meta:x}=G,{Group:J}=d.Z;function K(y){const{articleMap:i,categoryMap:r,isLoading:p,loadingArticleId:f,articleInModalHTMLContent:Z,articleInModalTitle:C,modalIsVisible:g,modalOnCancel:l,modalOnOk:v,onArticleTitleClick:D,onIsVisibleSwitchClick:B,onModifyArticleButtonClick:P,onDeleteArticleButtonClick:$,onDeleteArticleConfirm:N}=y;return e.createElement("div",{className:s.ArticleList},e.createElement(S.Z,{loading:p,active:!0,paragraph:{rows:15}},e.createElement(A.ZP,{dataSource:Array.from(i.values()),bordered:!0,pagination:{position:"bottom",pageSizeOptions:["5","10","15","20"],showSizeChanger:!0,hideOnSinglePage:!0},renderItem:L=>{const{id:o,title:I,isVisible:w,publicationTime:b,modificationTime:F}=L,E=new Date(b),O=new Date(F);return e.createElement(G,{key:o},e.createElement(x,{title:e.createElement("span",{className:s.title,onClick:D(o)},I)}),e.createElement(u.Z,{color:"blue"},r.get(i.get(o).category).name),e.createElement(u.Z,{color:"geekblue"},"\u53D1\u8868\uFF1A",e.createElement("time",null,`${E.getFullYear()}-${(E.getMonth()+1).toString().padStart(2,"0")}-${E.getDate().toString().padStart(2,"0")}`)),e.createElement(u.Z,{color:"geekblue"},"\u7F16\u8F91\uFF1A",e.createElement("time",null,`${O.getFullYear()}-${(O.getMonth()+1).toString().padStart(2,"0")}-${O.getDate().toString().padStart(2,"0")}`)),e.createElement(m.Z,{title:"\u66F4\u6539\u6587\u7AE0\u53EF\u89C1\u6027"},e.createElement(z.Z,{className:s.switch,onClick:B(o),checked:w,disabled:f===o,loading:f===o,checkedChildren:"\u53EF\u89C1",unCheckedChildren:"\u9690\u85CF"})),e.createElement(J,{size:"small",className:s.buttonWrapper},e.createElement(m.Z,{title:"\u7F16\u8F91\u6587\u7AE0"},e.createElement(d.Z,{type:"primary",ghost:!0,onClick:P(o)},e.createElement(j.Z,null))),e.createElement(m.Z,{title:"\u5220\u9664\u6587\u7AE0"},e.createElement(T.Z,{title:`\u786E\u8BA4\u5220\u9664\u6587\u7AE0\u300A${I}\u300B\uFF1F`,onConfirm:N},e.createElement(d.Z,{danger:!0,ghost:!0,onClick:$(o)},e.createElement(Q.Z,null))))))}})),e.createElement(V.Z,{title:C,HTMLContent:Z,visible:g,onOk:v,onCancel:l}))}var U=K,X=t(3326),H=t(8342),q=t(4315),M=t(3404),_=t(5092),W=t(5509),ee=t(5582),Y=(y,i,r)=>new Promise((p,f)=>{var Z=l=>{try{g(r.next(l))}catch(v){f(v)}},C=l=>{try{g(r.throw(l))}catch(v){f(v)}},g=l=>l.done?p(l.value):Promise.resolve(l.value).then(Z,C);g((r=r.apply(y,i)).next())});function te(y){const[i,r]=(0,e.useState)(new Map),[p,f]=(0,e.useState)(new Map),[Z,C]=(0,e.useState)(!1),[g,l]=(0,e.useState)(!1),[v,D]=(0,e.useState)(0),[B,P]=(0,e.useState)(""),[$,N]=(0,e.useState)(""),[L,o]=(0,e.useState)(!1),[I,w]=(0,e.useState)(0),b=(0,_.k6)(),{categoryIdFilter:F}=y;(0,e.useEffect)(()=>{C(!0),M.l.WD.getAll().then(n=>{if(n!==null){const a=new Map;n.forEach(c=>{a.set(c.id,c)}),f(a)}}).finally(()=>{C(!1)})},[]),(0,e.useEffect)(()=>{l(!0),Promise.resolve().then(()=>typeof F=="undefined"?M.l.d2.getAll():M.l.d2.getByCategory(F)).then(n=>{if(n!==null){const a=new Map;n.forEach(c=>{a.set(c.id,c)}),r(a)}}).finally(()=>{l(!1)})},[F]);const E=()=>{o(!L)},O=E,le=n=>a=>{a.preventDefault();const c=i.get(n);typeof c=="undefined"?H.ZP.warning("\u6587\u7AE0\u4E0D\u5B58\u5728"):(P(c.title),N(X.R.makeHtml(c.content)),o(!0))},ae=n=>a=>Y(this,null,function*(){if(D(n),(yield M.l.d2.modify({id:n,isVisible:a}))!==null){const R=i.get(n);R===void 0?H.ZP.warning("\u6587\u7AE0\u4E0D\u5B58\u5728"):(R.isVisible=a,r(new Map(i)),D(0))}}),ie=n=>a=>{a.preventDefault(),b.push(`${W.yt[W.DV.MANAGE.BLOG.ARTICLE.MODIFY]}?${ee.encode({id:n})}`)},oe=n=>()=>{w(n)},re=()=>Y(this,null,function*(){(yield M.l.d2.deleteById(I))!==null&&(q.Z.success({message:"\u6587\u7AE0\u5220\u9664\u6210\u529F"}),i.delete(I),r(new Map(i)))});return e.createElement(U,{isLoading:Z||g,articleMap:i,categoryMap:p,modalIsVisible:L,articleInModalTitle:B,articleInModalHTMLContent:$,modalOnOk:E,modalOnCancel:O,loadingArticleId:v,onArticleTitleClick:le,onIsVisibleSwitchClick:ae,onModifyArticleButtonClick:ie,onDeleteArticleButtonClick:oe,onDeleteArticleConfirm:re})}var ne=e.memo(te)},3138:function(k,h,t){t.r(h),t.d(h,{default:function(){return m}});var e=t(9526),s={Manage:"Style_Manage__lQDYG"},A=t(9278),d=A.Z;function S(){return e.createElement("div",{className:s.Manage},e.createElement(d,null))}var u=e.memo(S),m=u},561:function(k,h,t){t.d(h,{Z:function(){return m}});var e=t(1413),s=t(9526),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},d=A,S=t(6593),u=function(T,V){return s.createElement(S.Z,(0,e.Z)((0,e.Z)({},T),{},{ref:V,icon:d}))};u.displayName="SearchOutlined";var m=s.forwardRef(u)}}]);

//# sourceMappingURL=883.0529a70b.chunk.js.map