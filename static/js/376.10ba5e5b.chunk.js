"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[376],{9278:function(K,d,t){t.d(d,{Z:function(){return ne}});var e=t(9526),a={ArticleList:"Style_ArticleList__88A49",title:"Style_title__oFF6d",switch:"Style_switch__Scpbh",buttonWrapper:"Style_buttonWrapper__j7P69"},g=t(1961),m=t(592),M=t(7025),c=t(5113),l=t(3480),P=t(409),A=t(3009),h=t(6275),O=t(932),p=t(5303);const{Item:U}=g.ZP,{Meta:z}=U,{Group:C}=m.Z;function v(T){const{articleMap:s,categoryMap:f,isLoading:B,loadingArticleId:I,articleInModalHTMLContent:R,articleInModalTitle:F,modalIsVisible:D,modalOnCancel:i,modalOnOk:y,onArticleTitleClick:x,onIsVisibleSwitchClick:G,onModifyArticleButtonClick:H,onDeleteArticleButtonClick:b,onDeleteArticleConfirm:Y}=T;return e.createElement("div",{className:a.ArticleList},e.createElement(M.Z,{loading:B,active:!0,paragraph:{rows:15}},e.createElement(g.ZP,{dataSource:Array.from(s.values()),bordered:!0,pagination:{position:"bottom",pageSizeOptions:["5","10","15","20"],showSizeChanger:!0,hideOnSinglePage:!0},renderItem:$=>{const{id:u,title:N,isVisible:j,publicationTime:w,modificationTime:V}=$,Z=new Date(w),W=new Date(V);return e.createElement(U,{key:u},e.createElement(z,{title:e.createElement("span",{className:a.title,onClick:x(u)},N)}),e.createElement(c.Z,{color:"blue"},f.get(s.get(u).category).name),e.createElement(c.Z,{color:"geekblue"},"\u53D1\u8868\uFF1A",e.createElement("time",null,`${Z.getFullYear()}-${(Z.getMonth()+1).toString().padStart(2,"0")}-${Z.getDate().toString().padStart(2,"0")}`)),e.createElement(c.Z,{color:"geekblue"},"\u7F16\u8F91\uFF1A",e.createElement("time",null,`${W.getFullYear()}-${(W.getMonth()+1).toString().padStart(2,"0")}-${W.getDate().toString().padStart(2,"0")}`)),e.createElement(l.Z,{title:"\u66F4\u6539\u6587\u7AE0\u53EF\u89C1\u6027"},e.createElement(P.Z,{className:a.switch,onClick:G(u),checked:j,disabled:I===u,loading:I===u,checkedChildren:"\u53EF\u89C1",unCheckedChildren:"\u9690\u85CF"})),e.createElement(C,{size:"small",className:a.buttonWrapper},e.createElement(l.Z,{title:"\u7F16\u8F91\u6587\u7AE0"},e.createElement(m.Z,{type:"primary",ghost:!0,onClick:H(u)},e.createElement(O.Z,null))),e.createElement(l.Z,{title:"\u5220\u9664\u6587\u7AE0"},e.createElement(A.Z,{title:`\u786E\u8BA4\u5220\u9664\u6587\u7AE0\u300A${N}\u300B\uFF1F`,onConfirm:Y},e.createElement(m.Z,{danger:!0,ghost:!0,onClick:b(u)},e.createElement(p.Z,null))))))}})),e.createElement(h.Z,{title:F,HTMLContent:R,visible:D,onOk:y,onCancel:i}))}var S=v,r=t(3326),k=t(1824),_=t(4315),L=t(3404),q=t(5092),Q=t(5509),ee=t(5582),J=(T,s,f)=>new Promise((B,I)=>{var R=i=>{try{D(f.next(i))}catch(y){I(y)}},F=i=>{try{D(f.throw(i))}catch(y){I(y)}},D=i=>i.done?B(i.value):Promise.resolve(i.value).then(R,F);D((f=f.apply(T,s)).next())});function te(T){const[s,f]=(0,e.useState)(new Map),[B,I]=(0,e.useState)(new Map),[R,F]=(0,e.useState)(!1),[D,i]=(0,e.useState)(!1),[y,x]=(0,e.useState)(0),[G,H]=(0,e.useState)(""),[b,Y]=(0,e.useState)(""),[$,u]=(0,e.useState)(!1),[N,j]=(0,e.useState)(0),w=(0,q.k6)(),{categoryIdFilter:V}=T;(0,e.useEffect)(()=>{F(!0),L.l.WD.getAll().then(n=>{if(n!==null){const o=new Map;n.forEach(E=>{o.set(E.id,E)}),I(o)}}).finally(()=>{F(!1)})},[]),(0,e.useEffect)(()=>{i(!0),Promise.resolve().then(()=>typeof V=="undefined"?L.l.d2.getAll():L.l.d2.getByCategory(V)).then(n=>{if(n!==null){const o=new Map;n.forEach(E=>{o.set(E.id,E)}),f(o)}}).finally(()=>{i(!1)})},[V]);const Z=()=>{u(!$)},W=Z,ae=n=>o=>{o.preventDefault();const E=s.get(n);typeof E=="undefined"?k.ZP.warning("\u6587\u7AE0\u4E0D\u5B58\u5728"):(H(E.title),Y(r.R.makeHtml(E.content)),u(!0))},le=n=>o=>J(this,null,function*(){if(x(n),(yield L.l.d2.modify({id:n,isVisible:o}))!==null){const X=s.get(n);X===void 0?k.ZP.warning("\u6587\u7AE0\u4E0D\u5B58\u5728"):(X.isVisible=o,f(new Map(s)),x(0))}}),re=n=>o=>{o.preventDefault(),w.push(`${Q.yt[Q.DV.MANAGE.BLOG.ARTICLE.MODIFY]}?${ee.encode({id:n})}`)},ie=n=>()=>{j(n)},oe=()=>J(this,null,function*(){(yield L.l.d2.deleteById(N))!==null&&(_.Z.success({message:"\u6587\u7AE0\u5220\u9664\u6210\u529F"}),s.delete(N),f(new Map(s)))});return e.createElement(S,{isLoading:R||D,articleMap:s,categoryMap:B,modalIsVisible:$,articleInModalTitle:G,articleInModalHTMLContent:b,modalOnOk:Z,modalOnCancel:W,loadingArticleId:y,onArticleTitleClick:ae,onIsVisibleSwitchClick:le,onModifyArticleButtonClick:re,onDeleteArticleButtonClick:ie,onDeleteArticleConfirm:oe})}var ne=e.memo(te)},3138:function(K,d,t){t.r(d),t.d(d,{default:function(){return l}});var e=t(9526),a={Manage:"Style_Manage__lQDYG"},g=t(9278),m=g.Z;function M(){return e.createElement("div",{className:a.Manage},e.createElement(m,null))}var c=e.memo(M),l=c},561:function(K,d,t){t.d(d,{Z:function(){return l}});var e=t(1413),a=t(9526),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},m=g,M=t(6593),c=function(A,h){return a.createElement(M.Z,(0,e.Z)((0,e.Z)({},A),{},{ref:h,icon:m}))};c.displayName="SearchOutlined";var l=a.forwardRef(c)},38:function(K,d,t){t.d(d,{Ff:function(){return z},Zu:function(){return U},zl:function(){return p}});var e=t(4942),a=t(9526),g=t(4797),m=t(9255),M=t(3835),c=t(6841),l=t(4403),P=t.n(l),A=t(3001),h=(0,A.b)("warning","error",""),O={success:g.Z,warning:m.Z,error:M.Z,validating:c.Z},p=function(v,S){var r=S&&O[S];return r?a.createElement("span",{className:"".concat(v,"-feedback-icon")},a.createElement(r,null)):null};function U(C,v,S){var r;return P()((r={},(0,e.Z)(r,"".concat(C,"-status-success"),v==="success"),(0,e.Z)(r,"".concat(C,"-status-warning"),v==="warning"),(0,e.Z)(r,"".concat(C,"-status-error"),v==="error"),(0,e.Z)(r,"".concat(C,"-status-validating"),v==="validating"),(0,e.Z)(r,"".concat(C,"-has-feedback"),S),r))}var z=function(v,S){return S||v}},5957:function(K,d,t){t.d(d,{NV:function(){return l},ap:function(){return P}});var e=t(9526),a=t(8611),g=e.createContext({labelAlign:"right",vertical:!1,itemRef:function(){}}),m=null,M=function(h){var O=omit(h,["prefixCls"]);return React.createElement(RcFormProvider,O)},c=e.createContext({prefixCls:""}),l=e.createContext({}),P=function(h){var O=h.children,p=(0,e.useMemo)(function(){return{}},[]);return e.createElement(l.Provider,{value:p},O)}}}]);

//# sourceMappingURL=376.10ba5e5b.chunk.js.map